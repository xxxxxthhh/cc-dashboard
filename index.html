<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CC Strategy Dashboard</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0d1117;color:#c9d1d9;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;padding:24px}
#lock-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;height:80vh}
#lock-screen h1{font-size:48px;margin-bottom:24px}
#lock-screen input{background:#161b22;border:2px solid #30363d;border-radius:8px;color:#c9d1d9;font-size:24px;padding:12px 20px;width:200px;text-align:center;letter-spacing:8px;outline:none}
#lock-screen input:focus{border-color:#58a6ff}
#lock-screen .error{color:#f85149;font-size:13px;margin-top:8px;height:20px}
#dashboard{display:none}
h1{color:#58a6ff;font-size:22px;margin-bottom:8px}
h2{color:#8b949e;font-size:16px;margin:24px 0 12px;border-bottom:1px solid #21262d;padding-bottom:8px}
.subtitle{color:#8b949e;font-size:13px;margin-bottom:24px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:24px}
.card{background:#161b22;border:1px solid #21262d;border-radius:8px;padding:16px}
.card .label{color:#8b949e;font-size:12px;margin-bottom:4px}
.card .value{font-size:24px;font-weight:600}
.green{color:#3fb950}.red{color:#f85149}.blue{color:#58a6ff}.yellow{color:#d29922}
table{width:100%;border-collapse:collapse;background:#161b22;border:1px solid #21262d;border-radius:8px;overflow:hidden;margin-bottom:16px}
th{background:#21262d;color:#8b949e;font-size:12px;text-transform:uppercase;padding:10px 12px;text-align:left}
td{padding:10px 12px;border-top:1px solid #21262d;font-size:13px}
tr:hover{background:#1c2128}
.tag{display:inline-block;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:600}
.tag-safe{background:#0d2818;color:#3fb950}.tag-warn{background:#2d1b00;color:#d29922}.tag-danger{background:#2d0000;color:#f85149}.tag-idle{background:#1c1c1c;color:#8b949e}
.compare{display:grid;grid-template-columns:1fr 40px 1fr;gap:0;margin:16px 0}
.compare-box{background:#161b22;border:1px solid #21262d;border-radius:8px;padding:20px;text-align:center}
.compare-arrow{display:flex;align-items:center;justify-content:center;font-size:24px;color:#58a6ff}
.compare-box .big{font-size:32px;font-weight:700;margin:8px 0}
.note{color:#8b949e;font-size:12px;margin-top:8px}
.section-note{background:#161b22;border-left:3px solid #d29922;padding:12px 16px;margin:16px 0;font-size:13px;color:#d29922;border-radius:0 8px 8px 0}
.opt-change{display:flex;align-items:center;gap:8px;padding:6px 0;font-size:13px}
.opt-change .action{font-weight:600}
.sell{color:#f85149}.buy{color:#3fb950}
</style>
</head>
<body>

<div id="lock-screen">
<h1>ğŸ”’</h1>
<input type="password" id="pwd" maxlength="4" placeholder="Â·Â·Â·Â·" autofocus>
<div class="error" id="pwd-error"></div>
</div>

<div id="dashboard">
<h1>ğŸ´ CC Strategy Dashboard</h1>
<p class="subtitle">Covered Call æ”¶ç§Ÿå¹´åŒ–åˆ†æ Â· æ›´æ–°äº 2026-02-19</p>
<div class="grid" id="summary-cards"></div>
<h2>ğŸ’° 2026 å·²å®ç°æ”¶ç›Š</h2>
<div class="grid" id="realized-cards"></div>
<table id="closed-table"><thead><tr><th>æ ‡çš„</th><th>ç±»å‹</th><th>Strike</th><th>å¼€ä»“</th><th>å¹³ä»“</th><th>æŒæœ‰å¤©æ•°</th><th>æƒåˆ©é‡‘</th><th>ç»“æœ</th></tr></thead><tbody></tbody></table>
<h2>ğŸ“Š å½“å‰ CC æŒä»“è¡¨ç°</h2>
<table id="cc-table"><thead><tr><th>æ ‡çš„</th><th>Strike</th><th>å¼€ä»“</th><th>åˆ°æœŸ</th><th>DTE</th><th>æƒåˆ©é‡‘</th><th>æˆæœ¬(100è‚¡)</th><th>å•æ¬¡æ”¶ç›Šç‡</th><th>å¹´åŒ–æ”¶ç›Šç‡</th><th>çŠ¶æ€</th></tr></thead><tbody></tbody></table>
<h2>ğŸ’¤ æœªå¼€ CC çš„ä»“ä½ï¼ˆé—²ç½®èµ„é‡‘ï¼‰</h2>
<table id="idle-table"><thead><tr><th>æ ‡çš„</th><th>è‚¡æ•°</th><th>å‡ä»·</th><th>å¸‚å€¼(æˆæœ¬)</th><th>å¯å¼€CC</th><th>å¤‡æ³¨</th></tr></thead><tbody></tbody></table>
<h2>ğŸ”„ ä¼˜åŒ–æ–¹æ¡ˆ</h2>
<div class="section-note">å–æ‰é›¶æ•£ä»“ä½ï¼Œé›†ä¸­åˆ°é«˜ IV æ ‡çš„ï¼ˆCOINï¼‰ï¼Œæœ€å¤§åŒ– CC æ”¶ç§Ÿæ•ˆç‡</div>
<div id="opt-changes"></div>
<h2>ğŸ“ˆ å½“å‰ vs ä¼˜åŒ–å</h2>
<div class="compare">
<div class="compare-box"><div style="color:#8b949e">å½“å‰å¹´åŒ–æ”¶å…¥</div><div class="big yellow" id="current-income">â€”</div><div style="color:#8b949e;font-size:12px" id="current-yield">â€”</div></div>
<div class="compare-arrow">â†’</div>
<div class="compare-box"><div style="color:#8b949e">ä¼˜åŒ–åå¹´åŒ–æ”¶å…¥</div><div class="big green" id="opt-income">â€”</div><div style="color:#8b949e;font-size:12px" id="opt-yield">â€”</div></div>
</div>
<p class="note">* DTE ä¸ºä¼°ç®—å€¼ï¼Œå®é™…ä»¥å¼€ä»“æ—¥æœŸä¸ºå‡†ã€‚ä¼˜åŒ–åæ”¶å…¥åŸºäº 30-45 DTE æ»šåŠ¨ä¼°ç®—ã€‚</p>
</div>

<script>
const ENC = {"salt":"k47gdlsSeSd32eTDDk3F7g==","iv":"wBRPDWWStBKxkD2I","tag":"ArxECNkSpnRsNMCbzs+/7w==","data":"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"};

function b64(s){return Uint8Array.from(atob(s),c=>c.charCodeAt(0))}

async function decrypt(pwd){
  const enc=new TextEncoder();
  const keyMaterial=await crypto.subtle.importKey('raw',enc.encode(pwd),{name:'PBKDF2'},false,['deriveKey']);
  const key=await crypto.subtle.deriveKey({name:'PBKDF2',salt:b64(ENC.salt),iterations:100000,hash:'SHA-256'},keyMaterial,{name:'AES-GCM',length:256},false,['decrypt']);
  const ct=b64(ENC.data);
  const tag=b64(ENC.tag);
  const combined=new Uint8Array(ct.length+tag.length);
  combined.set(ct);combined.set(tag,ct.length);
  const plain=await crypto.subtle.decrypt({name:'AES-GCM',iv:b64(ENC.iv)},key,combined);
  return JSON.parse(new TextDecoder().decode(plain));
}

document.getElementById('pwd').addEventListener('input',async function(){
  if(this.value.length===4){
    try{
      const data=await decrypt(this.value);
      document.getElementById('lock-screen').style.display='none';
      document.getElementById('dashboard').style.display='block';
      render(data);
    }catch(e){
      document.getElementById('pwd-error').textContent='å¯†ç é”™è¯¯';
      this.value='';
    }
  }
});

function fmt(n){return '$'+n.toLocaleString('en-US',{minimumFractionDigits:0,maximumFractionDigits:0})}
function fmtPct(n){return n.toFixed(1)+'%'}
function daysBetween(d1,d2){return Math.round((new Date(d2)-new Date(d1))/86400000)}

function render(D){
  const today='2026-02-19';

  // Realized gains section
  const ctb=document.querySelector('#closed-table tbody');
  let totalRealized=0,tradeCount=0;
  (D.closedTrades||[]).forEach(t=>{
    const days=daysBetween(t.openDate,t.closeDate);
    totalRealized+=t.premium;tradeCount++;
    const tr=document.createElement('tr');
    tr.innerHTML=`<td><strong>${t.ticker}</strong></td><td>${t.type}</td><td>$${t.strike}</td><td>${t.openDate.slice(5)}</td><td>${t.closeDate.slice(5)}</td><td>${days}å¤©</td><td class="green">${fmt(t.premium)}</td><td><span class="tag ${t.assigned?'tag-warn':'tag-safe'}">${t.assigned?'è¢«Assign':'åˆ°æœŸå½’é›¶'}</span></td>`;
    ctb.appendChild(tr);
  });
  const startDate='2026-01-01';
  const daysYTD=daysBetween(startDate,today);
  const annRealized=daysYTD>0?totalRealized*(365/daysYTD):0;
  [{label:'YTD å·²å®ç°æ”¶ç›Š',value:fmt(totalRealized),cls:'green'},{label:'å·²å¹³ä»“ç¬”æ•°',value:tradeCount+'ç¬”',cls:'blue'},{label:'å¹´åŒ–æ¨ç®—',value:fmt(Math.round(annRealized)),cls:'green'}].forEach(c=>{
    const d=document.createElement('div');d.className='card';
    d.innerHTML=`<div class="label">${c.label}</div><div class="value ${c.cls}">${c.value}</div>`;
    document.getElementById('realized-cards').appendChild(d);
  });

  const tbody=document.querySelector('#cc-table tbody');
  let totalPA=0,totalCC=0;

  D.ccPositions.forEach(p=>{
    const dte=daysBetween(p.sellDate,p.expiry);
    const cost100=p.costPerShare*100;
    const yPer=(p.premium/cost100)*100;
    const ann=yPer*(365/dte);
    totalPA+=(p.premium/dte)*365;
    totalCC+=cost100;
    let st,sc;
    if(p.closed){st='å·²å¹³ä»“';sc='tag-idle'}
    else if(ann>30){st='é«˜æ”¶ç›Š';sc='tag-safe'}
    else if(ann>15){st='æ­£å¸¸';sc='tag-safe'}
    else{st='åä½';sc='tag-warn'}
    const dl=daysBetween(today,p.expiry);
    if(!p.closed&&dl<=2){st='âš ï¸ å³å°†åˆ°æœŸ';sc='tag-warn'}
    const tr=document.createElement('tr');
    tr.innerHTML=`<td><strong>${p.ticker}</strong></td><td>$${p.strike}</td><td>${p.sellDate.slice(5)}</td><td>${p.expiry.slice(5)}</td><td>${dte}å¤©</td><td>${fmt(p.premium)}</td><td>${fmt(Math.round(cost100))}</td><td>${fmtPct(yPer)}</td><td><strong>${fmtPct(ann)}</strong></td><td><span class="tag ${sc}">${st}</span></td>`;
    tbody.appendChild(tr);
  });

  const itb=document.querySelector('#idle-table tbody');
  let totalIdle=0;
  D.idlePositions.forEach(p=>{
    const mv=p.shares*p.cost;totalIdle+=mv;
    const tr=document.createElement('tr');
    tr.innerHTML=`<td><strong>${p.ticker}</strong></td><td>${p.shares}</td><td>$${p.cost}</td><td>${fmt(Math.round(mv))}</td><td>${p.canCC?'<span class="tag tag-safe">å¯ä»¥</span>':'<span class="tag tag-danger">ä¸è¶³100è‚¡</span>'}</td><td>${p.note}</td>`;
    itb.appendChild(tr);
  });

  const totalCap=totalCC+totalIdle;
  const ccCov=totalCC/totalCap*100;
  const pYield=totalPA/totalCap*100;
  [{label:'æ€»æŒä»“æˆæœ¬',value:fmt(Math.round(totalCap)),cls:'blue'},{label:'CC è¦†ç›–èµ„é‡‘',value:fmt(Math.round(totalCC)),cls:'green'},{label:'é—²ç½®èµ„é‡‘',value:fmt(Math.round(totalIdle)),cls:'yellow'},{label:'CC è¦†ç›–ç‡',value:fmtPct(ccCov),cls:ccCov>60?'green':'yellow'},{label:'CC å¹´åŒ–æ”¶å…¥(ä¼°)',value:fmt(Math.round(totalPA)),cls:'green'},{label:'ç»„åˆå¹´åŒ–æ”¶ç›Šç‡',value:fmtPct(pYield),cls:pYield>10?'green':'yellow'}].forEach(c=>{
    const d=document.createElement('div');d.className='card';
    d.innerHTML=`<div class="label">${c.label}</div><div class="value ${c.cls}">${c.value}</div>`;
    document.getElementById('summary-cards').appendChild(d);
  });

  D.optChanges.forEach(c=>{
    const d=document.createElement('div');d.className='opt-change';
    d.innerHTML=`<span class="action ${c.cls}">${c.action}</span> ${c.detail}`;
    document.getElementById('opt-changes').appendChild(d);
  });

  const optAI=D.optEstimates.reduce((s,e)=>s+e.monthlyPremium*12,0);
  const optTC=D.optEstimates.reduce((s,e)=>s+e.cost,0);
  document.getElementById('current-income').textContent=fmt(Math.round(totalPA));
  document.getElementById('current-yield').textContent='ç»„åˆå¹´åŒ– '+fmtPct(pYield);
  document.getElementById('opt-income').textContent=fmt(optAI);
  document.getElementById('opt-yield').textContent='ç»„åˆå¹´åŒ– '+fmtPct(optAI/optTC*100);
}
</script>
</body>
</html>
