<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CC Strategy Dashboard</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0d1117;color:#c9d1d9;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;padding:24px}
#lock-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;height:80vh}
#lock-screen h1{font-size:48px;margin-bottom:24px}
#lock-screen input{background:#161b22;border:2px solid #30363d;border-radius:8px;color:#c9d1d9;font-size:24px;padding:12px 20px;width:200px;text-align:center;letter-spacing:8px;outline:none}
#lock-screen input:focus{border-color:#58a6ff}
#lock-screen .error{color:#f85149;font-size:13px;margin-top:8px;height:20px}
#dashboard{display:none}
h1{color:#58a6ff;font-size:22px;margin-bottom:8px}
h2{color:#8b949e;font-size:16px;margin:24px 0 12px;border-bottom:1px solid #21262d;padding-bottom:8px}
.subtitle{color:#8b949e;font-size:13px;margin-bottom:24px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:24px}
.card{background:#161b22;border:1px solid #21262d;border-radius:8px;padding:16px}
.card .label{color:#8b949e;font-size:12px;margin-bottom:4px}
.card .value{font-size:24px;font-weight:600}
.green{color:#3fb950}.red{color:#f85149}.blue{color:#58a6ff}.yellow{color:#d29922}
table{width:100%;border-collapse:collapse;background:#161b22;border:1px solid #21262d;border-radius:8px;overflow:hidden;margin-bottom:16px}
th{background:#21262d;color:#8b949e;font-size:12px;text-transform:uppercase;padding:10px 12px;text-align:left}
td{padding:10px 12px;border-top:1px solid #21262d;font-size:13px}
tr:hover{background:#1c2128}
.tag{display:inline-block;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:600}
.tag-safe{background:#0d2818;color:#3fb950}.tag-warn{background:#2d1b00;color:#d29922}.tag-danger{background:#2d0000;color:#f85149}.tag-idle{background:#1c1c1c;color:#8b949e}
.compare{display:grid;grid-template-columns:1fr 40px 1fr;gap:0;margin:16px 0}
.compare-box{background:#161b22;border:1px solid #21262d;border-radius:8px;padding:20px;text-align:center}
.compare-arrow{display:flex;align-items:center;justify-content:center;font-size:24px;color:#58a6ff}
.compare-box .big{font-size:32px;font-weight:700;margin:8px 0}
.note{color:#8b949e;font-size:12px;margin-top:8px}
.section-note{background:#161b22;border-left:3px solid #d29922;padding:12px 16px;margin:16px 0;font-size:13px;color:#d29922;border-radius:0 8px 8px 0}
.opt-change{display:flex;align-items:center;gap:8px;padding:6px 0;font-size:13px}
.opt-change .action{font-weight:600}
.sell{color:#f85149}.buy{color:#3fb950}
</style>
</head>
<body>

<div id="lock-screen">
<h1>ğŸ”’</h1>
<input type="password" id="pwd" maxlength="4" placeholder="Â·Â·Â·Â·" autofocus>
<div class="error" id="pwd-error"></div>
</div>

<div id="dashboard">
<h1>ğŸ´ CC Strategy Dashboard</h1>
<p class="subtitle">Covered Call æ”¶ç§Ÿå¹´åŒ–åˆ†æ Â· æ›´æ–°äº 2026-02-21</p>
<div class="grid" id="summary-cards"></div>
<h2>ğŸ’° 2026 å·²å®ç°æ”¶ç›Š</h2>
<div class="grid" id="realized-cards"></div>
<table id="closed-table"><thead><tr><th>æ ‡çš„</th><th>ç±»å‹</th><th>Strike</th><th>å¼€ä»“</th><th>å¹³ä»“</th><th>æŒæœ‰å¤©æ•°</th><th>æƒåˆ©é‡‘</th><th>ç»“æœ</th></tr></thead><tbody></tbody></table>
<h2>ğŸ“Š å½“å‰ CC æŒä»“è¡¨ç°</h2>
<table id="cc-table"><thead><tr><th>æ ‡çš„</th><th>Strike</th><th>å¼€ä»“</th><th>åˆ°æœŸ</th><th>DTE</th><th>æƒåˆ©é‡‘</th><th>æˆæœ¬(100è‚¡)</th><th>å•æ¬¡æ”¶ç›Šç‡</th><th>å¹´åŒ–æ”¶ç›Šç‡</th><th>çŠ¶æ€</th></tr></thead><tbody></tbody></table>
<h2>ğŸ’¤ æœªå¼€ CC çš„ä»“ä½ï¼ˆé—²ç½®èµ„é‡‘ï¼‰</h2>
<table id="idle-table"><thead><tr><th>æ ‡çš„</th><th>è‚¡æ•°</th><th>å‡ä»·</th><th>å¸‚å€¼(æˆæœ¬)</th><th>å¯å¼€CC</th><th>å¤‡æ³¨</th></tr></thead><tbody></tbody></table>
<h2>ğŸ”„ ä¼˜åŒ–æ–¹æ¡ˆ</h2>
<div class="section-note">å–æ‰é›¶æ•£ä»“ä½ï¼Œé›†ä¸­åˆ°é«˜ IV æ ‡çš„ï¼ˆCOINï¼‰ï¼Œæœ€å¤§åŒ– CC æ”¶ç§Ÿæ•ˆç‡</div>
<div id="opt-changes"></div>
<h2>ğŸ“ˆ å½“å‰ vs ä¼˜åŒ–å</h2>
<div class="compare">
<div class="compare-box"><div style="color:#8b949e">å½“å‰å¹´åŒ–æ”¶å…¥</div><div class="big yellow" id="current-income">â€”</div><div style="color:#8b949e;font-size:12px" id="current-yield">â€”</div></div>
<div class="compare-arrow">â†’</div>
<div class="compare-box"><div style="color:#8b949e">ä¼˜åŒ–åå¹´åŒ–æ”¶å…¥</div><div class="big green" id="opt-income">â€”</div><div style="color:#8b949e;font-size:12px" id="opt-yield">â€”</div></div>
</div>
<p class="note">* DTE ä¸ºä¼°ç®—å€¼ï¼Œå®é™…ä»¥å¼€ä»“æ—¥æœŸä¸ºå‡†ã€‚ä¼˜åŒ–åæ”¶å…¥åŸºäº 30-45 DTE æ»šåŠ¨ä¼°ç®—ã€‚</p>
</div>

<script>
const ENC = {"salt":"xSq4M2uAHFcltKJVd2weVw==","iv":"QGmXIBrffP+gzOn0","tag":"BRQbriMElmM/4ln3mjRdMg==","data":"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"};

function b64(s){return Uint8Array.from(atob(s),c=>c.charCodeAt(0))}

async function decrypt(pwd){
  const enc=new TextEncoder();
  const keyMaterial=await crypto.subtle.importKey('raw',enc.encode(pwd),{name:'PBKDF2'},false,['deriveKey']);
  const key=await crypto.subtle.deriveKey({name:'PBKDF2',salt:b64(ENC.salt),iterations:100000,hash:'SHA-256'},keyMaterial,{name:'AES-GCM',length:256},false,['decrypt']);
  const ct=b64(ENC.data);
  const tag=b64(ENC.tag);
  const combined=new Uint8Array(ct.length+tag.length);
  combined.set(ct);combined.set(tag,ct.length);
  const plain=await crypto.subtle.decrypt({name:'AES-GCM',iv:b64(ENC.iv)},key,combined);
  return JSON.parse(new TextDecoder().decode(plain));
}

document.getElementById('pwd').addEventListener('input',async function(){
  if(this.value.length===4){
    try{
      const data=await decrypt(this.value);
      document.getElementById('lock-screen').style.display='none';
      document.getElementById('dashboard').style.display='block';
      render(data);
    }catch(e){
      document.getElementById('pwd-error').textContent='å¯†ç é”™è¯¯';
      this.value='';
    }
  }
});

function fmt(n){return '$'+n.toLocaleString('en-US',{minimumFractionDigits:0,maximumFractionDigits:0})}
function fmtPct(n){return n.toFixed(1)+'%'}
function daysBetween(d1,d2){return Math.round((new Date(d2)-new Date(d1))/86400000)}

function render(D){
  const today='2026-02-19';

  // Realized gains section
  const ctb=document.querySelector('#closed-table tbody');
  let totalRealized=0,tradeCount=0;
  (D.closedTrades||[]).forEach(t=>{
    const days=daysBetween(t.openDate,t.closeDate);
    totalRealized+=t.premium;tradeCount++;
    const tr=document.createElement('tr');
    tr.innerHTML=`<td><strong>${t.ticker}</strong></td><td>${t.type}</td><td>$${t.strike}</td><td>${t.openDate.slice(5)}</td><td>${t.closeDate.slice(5)}</td><td>${days}å¤©</td><td class="green">${fmt(t.premium)}</td><td><span class="tag ${t.assigned?'tag-warn':'tag-safe'}">${t.assigned?'è¢«Assign':'åˆ°æœŸå½’é›¶'}</span></td>`;
    ctb.appendChild(tr);
  });
  const startDate='2026-01-01';
  const daysYTD=daysBetween(startDate,today);
  const annRealized=daysYTD>0?totalRealized*(365/daysYTD):0;
  [{label:'YTD å·²å®ç°æ”¶ç›Š',value:fmt(totalRealized),cls:'green'},{label:'å·²å¹³ä»“ç¬”æ•°',value:tradeCount+'ç¬”',cls:'blue'},{label:'å¹´åŒ–æ¨ç®—',value:fmt(Math.round(annRealized)),cls:'green'}].forEach(c=>{
    const d=document.createElement('div');d.className='card';
    d.innerHTML=`<div class="label">${c.label}</div><div class="value ${c.cls}">${c.value}</div>`;
    document.getElementById('realized-cards').appendChild(d);
  });

  const tbody=document.querySelector('#cc-table tbody');
  let totalPA=0,totalCC=0;

  D.ccPositions.forEach(p=>{
    const dte=daysBetween(p.sellDate,p.expiry);
    const cost100=p.costPerShare*100;
    const yPer=(p.premium/cost100)*100;
    const ann=yPer*(365/dte);
    totalPA+=(p.premium/dte)*365;
    totalCC+=cost100;
    let st,sc;
    if(p.closed){st='å·²å¹³ä»“';sc='tag-idle'}
    else if(ann>30){st='é«˜æ”¶ç›Š';sc='tag-safe'}
    else if(ann>15){st='æ­£å¸¸';sc='tag-safe'}
    else{st='åä½';sc='tag-warn'}
    const dl=daysBetween(today,p.expiry);
    if(!p.closed&&dl<=2){st='âš ï¸ å³å°†åˆ°æœŸ';sc='tag-warn'}
    const tr=document.createElement('tr');
    tr.innerHTML=`<td><strong>${p.ticker}</strong></td><td>$${p.strike}</td><td>${p.sellDate.slice(5)}</td><td>${p.expiry.slice(5)}</td><td>${dte}å¤©</td><td>${fmt(p.premium)}</td><td>${fmt(Math.round(cost100))}</td><td>${fmtPct(yPer)}</td><td><strong>${fmtPct(ann)}</strong></td><td><span class="tag ${sc}">${st}</span></td>`;
    tbody.appendChild(tr);
  });

  const itb=document.querySelector('#idle-table tbody');
  let totalIdle=0;
  D.idlePositions.forEach(p=>{
    const mv=p.shares*p.cost;totalIdle+=mv;
    const tr=document.createElement('tr');
    tr.innerHTML=`<td><strong>${p.ticker}</strong></td><td>${p.shares}</td><td>$${p.cost}</td><td>${fmt(Math.round(mv))}</td><td>${p.canCC?'<span class="tag tag-safe">å¯ä»¥</span>':'<span class="tag tag-danger">ä¸è¶³100è‚¡</span>'}</td><td>${p.note}</td>`;
    itb.appendChild(tr);
  });

  const totalCap=totalCC+totalIdle;
  const ccCov=totalCC/totalCap*100;
  const pYield=totalPA/totalCap*100;
  [{label:'æ€»æŒä»“æˆæœ¬',value:fmt(Math.round(totalCap)),cls:'blue'},{label:'CC è¦†ç›–èµ„é‡‘',value:fmt(Math.round(totalCC)),cls:'green'},{label:'é—²ç½®èµ„é‡‘',value:fmt(Math.round(totalIdle)),cls:'yellow'},{label:'CC è¦†ç›–ç‡',value:fmtPct(ccCov),cls:ccCov>60?'green':'yellow'},{label:'CC å¹´åŒ–æ”¶å…¥(ä¼°)',value:fmt(Math.round(totalPA)),cls:'green'},{label:'ç»„åˆå¹´åŒ–æ”¶ç›Šç‡',value:fmtPct(pYield),cls:pYield>10?'green':'yellow'}].forEach(c=>{
    const d=document.createElement('div');d.className='card';
    d.innerHTML=`<div class="label">${c.label}</div><div class="value ${c.cls}">${c.value}</div>`;
    document.getElementById('summary-cards').appendChild(d);
  });

  D.optChanges.forEach(c=>{
    const d=document.createElement('div');d.className='opt-change';
    d.innerHTML=`<span class="action ${c.cls}">${c.action}</span> ${c.detail}`;
    document.getElementById('opt-changes').appendChild(d);
  });

  const optAI=D.optEstimates.reduce((s,e)=>s+e.monthlyPremium*12,0);
  const optTC=D.optEstimates.reduce((s,e)=>s+e.cost,0);
  document.getElementById('current-income').textContent=fmt(Math.round(totalPA));
  document.getElementById('current-yield').textContent='ç»„åˆå¹´åŒ– '+fmtPct(pYield);
  document.getElementById('opt-income').textContent=fmt(optAI);
  document.getElementById('opt-yield').textContent='ç»„åˆå¹´åŒ– '+fmtPct(optAI/optTC*100);
}
</script>
</body>
</html>
