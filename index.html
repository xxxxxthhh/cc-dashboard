<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CC Strategy Dashboard</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0d1117;color:#c9d1d9;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;padding:24px}
#lock-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;height:80vh}
#lock-screen h1{font-size:48px;margin-bottom:24px}
#lock-screen input{background:#161b22;border:2px solid #30363d;border-radius:8px;color:#c9d1d9;font-size:24px;padding:12px 20px;width:200px;text-align:center;letter-spacing:8px;outline:none}
#lock-screen input:focus{border-color:#58a6ff}
#lock-screen .error{color:#f85149;font-size:13px;margin-top:8px;height:20px}
#dashboard{display:none}
h1{color:#58a6ff;font-size:22px;margin-bottom:8px}
h2{color:#8b949e;font-size:16px;margin:24px 0 12px;border-bottom:1px solid #21262d;padding-bottom:8px}
.subtitle{color:#8b949e;font-size:13px;margin-bottom:24px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:24px}
.card{background:#161b22;border:1px solid #21262d;border-radius:8px;padding:16px}
.card .label{color:#8b949e;font-size:12px;margin-bottom:4px}
.card .value{font-size:24px;font-weight:600}
.green{color:#3fb950}.red{color:#f85149}.blue{color:#58a6ff}.yellow{color:#d29922}
table{width:100%;border-collapse:collapse;background:#161b22;border:1px solid #21262d;border-radius:8px;overflow:hidden;margin-bottom:16px}
th{background:#21262d;color:#8b949e;font-size:12px;text-transform:uppercase;padding:10px 12px;text-align:left}
td{padding:10px 12px;border-top:1px solid #21262d;font-size:13px}
tr:hover{background:#1c2128}
.tag{display:inline-block;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:600}
.tag-safe{background:#0d2818;color:#3fb950}.tag-warn{background:#2d1b00;color:#d29922}.tag-danger{background:#2d0000;color:#f85149}.tag-idle{background:#1c1c1c;color:#8b949e}
.compare{display:grid;grid-template-columns:1fr 40px 1fr;gap:0;margin:16px 0}
.compare-box{background:#161b22;border:1px solid #21262d;border-radius:8px;padding:20px;text-align:center}
.compare-arrow{display:flex;align-items:center;justify-content:center;font-size:24px;color:#58a6ff}
.compare-box .big{font-size:32px;font-weight:700;margin:8px 0}
.note{color:#8b949e;font-size:12px;margin-top:8px}
.section-note{background:#161b22;border-left:3px solid #d29922;padding:12px 16px;margin:16px 0;font-size:13px;color:#d29922;border-radius:0 8px 8px 0}
.opt-change{display:flex;align-items:center;gap:8px;padding:6px 0;font-size:13px}
.opt-change .action{font-weight:600}
.sell{color:#f85149}.buy{color:#3fb950}
</style>
</head>
<body>

<div id="lock-screen">
<h1>ğŸ”’</h1>
<input type="password" id="pwd" maxlength="4" placeholder="Â·Â·Â·Â·" autofocus>
<div class="error" id="pwd-error"></div>
</div>

<div id="dashboard">
<h1>ğŸ´ CC Strategy Dashboard</h1>
<p class="subtitle">Covered Call æ”¶ç§Ÿå¹´åŒ–åˆ†æ Â· æ›´æ–°äº 2026-02-18</p>
<div class="grid" id="summary-cards"></div>
<h2>ğŸ“Š å½“å‰ CC æŒä»“è¡¨ç°</h2>
<table id="cc-table"><thead><tr><th>æ ‡çš„</th><th>Strike</th><th>åˆ°æœŸ</th><th>DTE</th><th>æƒåˆ©é‡‘</th><th>æˆæœ¬(100è‚¡)</th><th>å•æ¬¡æ”¶ç›Šç‡</th><th>å¹´åŒ–æ”¶ç›Šç‡</th><th>çŠ¶æ€</th></tr></thead><tbody></tbody></table>
<h2>ğŸ’¤ æœªå¼€ CC çš„ä»“ä½ï¼ˆé—²ç½®èµ„é‡‘ï¼‰</h2>
<table id="idle-table"><thead><tr><th>æ ‡çš„</th><th>è‚¡æ•°</th><th>å‡ä»·</th><th>å¸‚å€¼(æˆæœ¬)</th><th>å¯å¼€CC</th><th>å¤‡æ³¨</th></tr></thead><tbody></tbody></table>
<h2>ğŸ”„ ä¼˜åŒ–æ–¹æ¡ˆ</h2>
<div class="section-note">å–æ‰é›¶æ•£ä»“ä½ï¼Œé›†ä¸­åˆ°é«˜ IV æ ‡çš„ï¼ˆCOINï¼‰ï¼Œæœ€å¤§åŒ– CC æ”¶ç§Ÿæ•ˆç‡</div>
<div id="opt-changes"></div>
<h2>ğŸ“ˆ å½“å‰ vs ä¼˜åŒ–å</h2>
<div class="compare">
<div class="compare-box"><div style="color:#8b949e">å½“å‰å¹´åŒ–æ”¶å…¥</div><div class="big yellow" id="current-income">â€”</div><div style="color:#8b949e;font-size:12px" id="current-yield">â€”</div></div>
<div class="compare-arrow">â†’</div>
<div class="compare-box"><div style="color:#8b949e">ä¼˜åŒ–åå¹´åŒ–æ”¶å…¥</div><div class="big green" id="opt-income">â€”</div><div style="color:#8b949e;font-size:12px" id="opt-yield">â€”</div></div>
</div>
<p class="note">* DTE ä¸ºä¼°ç®—å€¼ï¼Œå®é™…ä»¥å¼€ä»“æ—¥æœŸä¸ºå‡†ã€‚ä¼˜åŒ–åæ”¶å…¥åŸºäº 30-45 DTE æ»šåŠ¨ä¼°ç®—ã€‚</p>
</div>

<script>
const ENC = {"salt":"9LIYVUX6uhG9N0DTZOTaWw==","iv":"zDLD3f0oTWD7Xxbs","tag":"ZEAzEUKgIVUoYsqX+NmJGw==","data":"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"};

function b64(s){return Uint8Array.from(atob(s),c=>c.charCodeAt(0))}

async function decrypt(pwd){
  const enc=new TextEncoder();
  const keyMaterial=await crypto.subtle.importKey('raw',enc.encode(pwd),{name:'PBKDF2'},false,['deriveKey']);
  const key=await crypto.subtle.deriveKey({name:'PBKDF2',salt:b64(ENC.salt),iterations:100000,hash:'SHA-256'},keyMaterial,{name:'AES-GCM',length:256},false,['decrypt']);
  const ct=b64(ENC.data);
  const tag=b64(ENC.tag);
  const combined=new Uint8Array(ct.length+tag.length);
  combined.set(ct);combined.set(tag,ct.length);
  const plain=await crypto.subtle.decrypt({name:'AES-GCM',iv:b64(ENC.iv)},key,combined);
  return JSON.parse(new TextDecoder().decode(plain));
}

document.getElementById('pwd').addEventListener('input',async function(){
  if(this.value.length===4){
    try{
      const data=await decrypt(this.value);
      document.getElementById('lock-screen').style.display='none';
      document.getElementById('dashboard').style.display='block';
      render(data);
    }catch(e){
      document.getElementById('pwd-error').textContent='å¯†ç é”™è¯¯';
      this.value='';
    }
  }
});

function fmt(n){return '$'+n.toLocaleString('en-US',{minimumFractionDigits:0,maximumFractionDigits:0})}
function fmtPct(n){return n.toFixed(1)+'%'}
function daysBetween(d1,d2){return Math.round((new Date(d2)-new Date(d1))/86400000)}

function render(D){
  const today='2026-02-18';
  const tbody=document.querySelector('#cc-table tbody');
  let totalPA=0,totalCC=0;

  D.ccPositions.forEach(p=>{
    const dte=daysBetween(p.sellDate,p.expiry);
    const cost100=p.costPerShare*100;
    const yPer=(p.premium/cost100)*100;
    const ann=yPer*(365/dte);
    totalPA+=(p.premium/dte)*365;
    totalCC+=cost100;
    let st,sc;
    if(p.closed){st='å·²å¹³ä»“';sc='tag-idle'}
    else if(ann>30){st='é«˜æ”¶ç›Š';sc='tag-safe'}
    else if(ann>15){st='æ­£å¸¸';sc='tag-safe'}
    else{st='åä½';sc='tag-warn'}
    const dl=daysBetween(today,p.expiry);
    if(!p.closed&&dl<=2){st='âš ï¸ å³å°†åˆ°æœŸ';sc='tag-warn'}
    const tr=document.createElement('tr');
    tr.innerHTML=`<td><strong>${p.ticker}</strong></td><td>$${p.strike}</td><td>${p.expiry.slice(5)}</td><td>${dte}å¤©</td><td>${fmt(p.premium)}</td><td>${fmt(Math.round(cost100))}</td><td>${fmtPct(yPer)}</td><td><strong>${fmtPct(ann)}</strong></td><td><span class="tag ${sc}">${st}</span></td>`;
    tbody.appendChild(tr);
  });

  const itb=document.querySelector('#idle-table tbody');
  let totalIdle=0;
  D.idlePositions.forEach(p=>{
    const mv=p.shares*p.cost;totalIdle+=mv;
    const tr=document.createElement('tr');
    tr.innerHTML=`<td><strong>${p.ticker}</strong></td><td>${p.shares}</td><td>$${p.cost}</td><td>${fmt(Math.round(mv))}</td><td>${p.canCC?'<span class="tag tag-safe">å¯ä»¥</span>':'<span class="tag tag-danger">ä¸è¶³100è‚¡</span>'}</td><td>${p.note}</td>`;
    itb.appendChild(tr);
  });

  const totalCap=totalCC+totalIdle;
  const ccCov=totalCC/totalCap*100;
  const pYield=totalPA/totalCap*100;
  [{label:'æ€»æŒä»“æˆæœ¬',value:fmt(Math.round(totalCap)),cls:'blue'},{label:'CC è¦†ç›–èµ„é‡‘',value:fmt(Math.round(totalCC)),cls:'green'},{label:'é—²ç½®èµ„é‡‘',value:fmt(Math.round(totalIdle)),cls:'yellow'},{label:'CC è¦†ç›–ç‡',value:fmtPct(ccCov),cls:ccCov>60?'green':'yellow'},{label:'CC å¹´åŒ–æ”¶å…¥(ä¼°)',value:fmt(Math.round(totalPA)),cls:'green'},{label:'ç»„åˆå¹´åŒ–æ”¶ç›Šç‡',value:fmtPct(pYield),cls:pYield>10?'green':'yellow'}].forEach(c=>{
    const d=document.createElement('div');d.className='card';
    d.innerHTML=`<div class="label">${c.label}</div><div class="value ${c.cls}">${c.value}</div>`;
    document.getElementById('summary-cards').appendChild(d);
  });

  D.optChanges.forEach(c=>{
    const d=document.createElement('div');d.className='opt-change';
    d.innerHTML=`<span class="action ${c.cls}">${c.action}</span> ${c.detail}`;
    document.getElementById('opt-changes').appendChild(d);
  });

  const optAI=D.optEstimates.reduce((s,e)=>s+e.monthlyPremium*12,0);
  const optTC=D.optEstimates.reduce((s,e)=>s+e.cost,0);
  document.getElementById('current-income').textContent=fmt(Math.round(totalPA));
  document.getElementById('current-yield').textContent='ç»„åˆå¹´åŒ– '+fmtPct(pYield);
  document.getElementById('opt-income').textContent=fmt(optAI);
  document.getElementById('opt-yield').textContent='ç»„åˆå¹´åŒ– '+fmtPct(optAI/optTC*100);
}
</script>
</body>
</html>
