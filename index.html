<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CC Strategy Dashboard</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0d1117;color:#c9d1d9;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;padding:24px}
#lock-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;height:80vh}
#lock-screen h1{font-size:48px;margin-bottom:24px}
#lock-screen input{background:#161b22;border:2px solid #30363d;border-radius:8px;color:#c9d1d9;font-size:24px;padding:12px 20px;width:200px;text-align:center;letter-spacing:8px;outline:none}
#lock-screen input:focus{border-color:#58a6ff}
#lock-screen .error{color:#f85149;font-size:13px;margin-top:8px;height:20px}
#dashboard{display:none}
h1{color:#58a6ff;font-size:22px;margin-bottom:8px}
h2{color:#8b949e;font-size:16px;margin:24px 0 12px;border-bottom:1px solid #21262d;padding-bottom:8px}
.subtitle{color:#8b949e;font-size:13px;margin-bottom:24px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:24px}
.card{background:#161b22;border:1px solid #21262d;border-radius:8px;padding:16px}
.card .label{color:#8b949e;font-size:12px;margin-bottom:4px}
.card .value{font-size:24px;font-weight:600}
.green{color:#3fb950}.red{color:#f85149}.blue{color:#58a6ff}.yellow{color:#d29922}
table{width:100%;border-collapse:collapse;background:#161b22;border:1px solid #21262d;border-radius:8px;overflow:hidden;margin-bottom:16px}
th{background:#21262d;color:#8b949e;font-size:12px;text-transform:uppercase;padding:10px 12px;text-align:left}
td{padding:10px 12px;border-top:1px solid #21262d;font-size:13px}
tr:hover{background:#1c2128}
.tag{display:inline-block;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:600}
.tag-safe{background:#0d2818;color:#3fb950}.tag-warn{background:#2d1b00;color:#d29922}.tag-danger{background:#2d0000;color:#f85149}.tag-idle{background:#1c1c1c;color:#8b949e}
.compare{display:grid;grid-template-columns:1fr 40px 1fr;gap:0;margin:16px 0}
.compare-box{background:#161b22;border:1px solid #21262d;border-radius:8px;padding:20px;text-align:center}
.compare-arrow{display:flex;align-items:center;justify-content:center;font-size:24px;color:#58a6ff}
.compare-box .big{font-size:32px;font-weight:700;margin:8px 0}
.note{color:#8b949e;font-size:12px;margin-top:8px}
.section-note{background:#161b22;border-left:3px solid #d29922;padding:12px 16px;margin:16px 0;font-size:13px;color:#d29922;border-radius:0 8px 8px 0}
.opt-change{display:flex;align-items:center;gap:8px;padding:6px 0;font-size:13px}
.opt-change .action{font-weight:600}
.sell{color:#f85149}.buy{color:#3fb950}
</style>
</head>
<body>

<div id="lock-screen">
<h1>ğŸ”’</h1>
<input type="password" id="pwd" maxlength="4" placeholder="Â·Â·Â·Â·" autofocus>
<div class="error" id="pwd-error"></div>
</div>

<div id="dashboard">
<h1>ğŸ´ CC Strategy Dashboard</h1>
<p class="subtitle">Covered Call æ”¶ç§Ÿå¹´åŒ–åˆ†æ Â· æ›´æ–°äº 2026-02-19</p>
<div class="grid" id="summary-cards"></div>
<h2>ğŸ“Š å½“å‰ CC æŒä»“è¡¨ç°</h2>
<table id="cc-table"><thead><tr><th>æ ‡çš„</th><th>Strike</th><th>åˆ°æœŸ</th><th>DTE</th><th>æƒåˆ©é‡‘</th><th>æˆæœ¬(100è‚¡)</th><th>å•æ¬¡æ”¶ç›Šç‡</th><th>å¹´åŒ–æ”¶ç›Šç‡</th><th>çŠ¶æ€</th></tr></thead><tbody></tbody></table>
<h2>ğŸ’¤ æœªå¼€ CC çš„ä»“ä½ï¼ˆé—²ç½®èµ„é‡‘ï¼‰</h2>
<table id="idle-table"><thead><tr><th>æ ‡çš„</th><th>è‚¡æ•°</th><th>å‡ä»·</th><th>å¸‚å€¼(æˆæœ¬)</th><th>å¯å¼€CC</th><th>å¤‡æ³¨</th></tr></thead><tbody></tbody></table>
<h2>ğŸ”„ ä¼˜åŒ–æ–¹æ¡ˆ</h2>
<div class="section-note">å–æ‰é›¶æ•£ä»“ä½ï¼Œé›†ä¸­åˆ°é«˜ IV æ ‡çš„ï¼ˆCOINï¼‰ï¼Œæœ€å¤§åŒ– CC æ”¶ç§Ÿæ•ˆç‡</div>
<div id="opt-changes"></div>
<h2>ğŸ“ˆ å½“å‰ vs ä¼˜åŒ–å</h2>
<div class="compare">
<div class="compare-box"><div style="color:#8b949e">å½“å‰å¹´åŒ–æ”¶å…¥</div><div class="big yellow" id="current-income">â€”</div><div style="color:#8b949e;font-size:12px" id="current-yield">â€”</div></div>
<div class="compare-arrow">â†’</div>
<div class="compare-box"><div style="color:#8b949e">ä¼˜åŒ–åå¹´åŒ–æ”¶å…¥</div><div class="big green" id="opt-income">â€”</div><div style="color:#8b949e;font-size:12px" id="opt-yield">â€”</div></div>
</div>
<p class="note">* DTE ä¸ºä¼°ç®—å€¼ï¼Œå®é™…ä»¥å¼€ä»“æ—¥æœŸä¸ºå‡†ã€‚ä¼˜åŒ–åæ”¶å…¥åŸºäº 30-45 DTE æ»šåŠ¨ä¼°ç®—ã€‚</p>
</div>

<script>
const ENC = {"salt":"eMl9DGoiRf/cOoukBDz5Hg==","iv":"TyGhnrQT5eILmTSi","tag":"LnlV3qhjShT8KTBqqDWkkw==","data":"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"};

function b64(s){return Uint8Array.from(atob(s),c=>c.charCodeAt(0))}

async function decrypt(pwd){
  const enc=new TextEncoder();
  const keyMaterial=await crypto.subtle.importKey('raw',enc.encode(pwd),{name:'PBKDF2'},false,['deriveKey']);
  const key=await crypto.subtle.deriveKey({name:'PBKDF2',salt:b64(ENC.salt),iterations:100000,hash:'SHA-256'},keyMaterial,{name:'AES-GCM',length:256},false,['decrypt']);
  const ct=b64(ENC.data);
  const tag=b64(ENC.tag);
  const combined=new Uint8Array(ct.length+tag.length);
  combined.set(ct);combined.set(tag,ct.length);
  const plain=await crypto.subtle.decrypt({name:'AES-GCM',iv:b64(ENC.iv)},key,combined);
  return JSON.parse(new TextDecoder().decode(plain));
}

document.getElementById('pwd').addEventListener('input',async function(){
  if(this.value.length===4){
    try{
      const data=await decrypt(this.value);
      document.getElementById('lock-screen').style.display='none';
      document.getElementById('dashboard').style.display='block';
      render(data);
    }catch(e){
      document.getElementById('pwd-error').textContent='å¯†ç é”™è¯¯';
      this.value='';
    }
  }
});

function fmt(n){return '$'+n.toLocaleString('en-US',{minimumFractionDigits:0,maximumFractionDigits:0})}
function fmtPct(n){return n.toFixed(1)+'%'}
function daysBetween(d1,d2){return Math.round((new Date(d2)-new Date(d1))/86400000)}

function render(D){
  const today='2026-02-19';
  const tbody=document.querySelector('#cc-table tbody');
  let totalPA=0,totalCC=0;

  D.ccPositions.forEach(p=>{
    const dte=daysBetween(p.sellDate,p.expiry);
    const cost100=p.costPerShare*100;
    const yPer=(p.premium/cost100)*100;
    const ann=yPer*(365/dte);
    totalPA+=(p.premium/dte)*365;
    totalCC+=cost100;
    let st,sc;
    if(p.closed){st='å·²å¹³ä»“';sc='tag-idle'}
    else if(ann>30){st='é«˜æ”¶ç›Š';sc='tag-safe'}
    else if(ann>15){st='æ­£å¸¸';sc='tag-safe'}
    else{st='åä½';sc='tag-warn'}
    const dl=daysBetween(today,p.expiry);
    if(!p.closed&&dl<=2){st='âš ï¸ å³å°†åˆ°æœŸ';sc='tag-warn'}
    const tr=document.createElement('tr');
    tr.innerHTML=`<td><strong>${p.ticker}</strong></td><td>$${p.strike}</td><td>${p.expiry.slice(5)}</td><td>${dte}å¤©</td><td>${fmt(p.premium)}</td><td>${fmt(Math.round(cost100))}</td><td>${fmtPct(yPer)}</td><td><strong>${fmtPct(ann)}</strong></td><td><span class="tag ${sc}">${st}</span></td>`;
    tbody.appendChild(tr);
  });

  const itb=document.querySelector('#idle-table tbody');
  let totalIdle=0;
  D.idlePositions.forEach(p=>{
    const mv=p.shares*p.cost;totalIdle+=mv;
    const tr=document.createElement('tr');
    tr.innerHTML=`<td><strong>${p.ticker}</strong></td><td>${p.shares}</td><td>$${p.cost}</td><td>${fmt(Math.round(mv))}</td><td>${p.canCC?'<span class="tag tag-safe">å¯ä»¥</span>':'<span class="tag tag-danger">ä¸è¶³100è‚¡</span>'}</td><td>${p.note}</td>`;
    itb.appendChild(tr);
  });

  const totalCap=totalCC+totalIdle;
  const ccCov=totalCC/totalCap*100;
  const pYield=totalPA/totalCap*100;
  [{label:'æ€»æŒä»“æˆæœ¬',value:fmt(Math.round(totalCap)),cls:'blue'},{label:'CC è¦†ç›–èµ„é‡‘',value:fmt(Math.round(totalCC)),cls:'green'},{label:'é—²ç½®èµ„é‡‘',value:fmt(Math.round(totalIdle)),cls:'yellow'},{label:'CC è¦†ç›–ç‡',value:fmtPct(ccCov),cls:ccCov>60?'green':'yellow'},{label:'CC å¹´åŒ–æ”¶å…¥(ä¼°)',value:fmt(Math.round(totalPA)),cls:'green'},{label:'ç»„åˆå¹´åŒ–æ”¶ç›Šç‡',value:fmtPct(pYield),cls:pYield>10?'green':'yellow'}].forEach(c=>{
    const d=document.createElement('div');d.className='card';
    d.innerHTML=`<div class="label">${c.label}</div><div class="value ${c.cls}">${c.value}</div>`;
    document.getElementById('summary-cards').appendChild(d);
  });

  D.optChanges.forEach(c=>{
    const d=document.createElement('div');d.className='opt-change';
    d.innerHTML=`<span class="action ${c.cls}">${c.action}</span> ${c.detail}`;
    document.getElementById('opt-changes').appendChild(d);
  });

  const optAI=D.optEstimates.reduce((s,e)=>s+e.monthlyPremium*12,0);
  const optTC=D.optEstimates.reduce((s,e)=>s+e.cost,0);
  document.getElementById('current-income').textContent=fmt(Math.round(totalPA));
  document.getElementById('current-yield').textContent='ç»„åˆå¹´åŒ– '+fmtPct(pYield);
  document.getElementById('opt-income').textContent=fmt(optAI);
  document.getElementById('opt-yield').textContent='ç»„åˆå¹´åŒ– '+fmtPct(optAI/optTC*100);
}
</script>
</body>
</html>
