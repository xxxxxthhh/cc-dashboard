<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CC Strategy Dashboard</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0d1117;color:#c9d1d9;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;padding:24px}
#lock-screen{display:flex;flex-direction:column;align-items:center;justify-content:center;height:80vh}
#lock-screen h1{font-size:48px;margin-bottom:24px}
#lock-screen input{background:#161b22;border:2px solid #30363d;border-radius:8px;color:#c9d1d9;font-size:24px;padding:12px 20px;width:200px;text-align:center;letter-spacing:8px;outline:none}
#lock-screen input:focus{border-color:#58a6ff}
#lock-screen .error{color:#f85149;font-size:13px;margin-top:8px;height:20px}
#dashboard{display:none}
h1{color:#58a6ff;font-size:22px;margin-bottom:8px}
h2{color:#8b949e;font-size:16px;margin:24px 0 12px;border-bottom:1px solid #21262d;padding-bottom:8px}
.subtitle{color:#8b949e;font-size:13px;margin-bottom:24px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:24px}
.card{background:#161b22;border:1px solid #21262d;border-radius:8px;padding:16px}
.card .label{color:#8b949e;font-size:12px;margin-bottom:4px}
.card .value{font-size:24px;font-weight:600}
.green{color:#3fb950}.red{color:#f85149}.blue{color:#58a6ff}.yellow{color:#d29922}
table{width:100%;border-collapse:collapse;background:#161b22;border:1px solid #21262d;border-radius:8px;overflow:hidden;margin-bottom:16px}
th{background:#21262d;color:#8b949e;font-size:12px;text-transform:uppercase;padding:10px 12px;text-align:left}
td{padding:10px 12px;border-top:1px solid #21262d;font-size:13px}
tr:hover{background:#1c2128}
.tag{display:inline-block;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:600}
.tag-safe{background:#0d2818;color:#3fb950}.tag-warn{background:#2d1b00;color:#d29922}.tag-danger{background:#2d0000;color:#f85149}.tag-idle{background:#1c1c1c;color:#8b949e}
.compare{display:grid;grid-template-columns:1fr 40px 1fr;gap:0;margin:16px 0}
.compare-box{background:#161b22;border:1px solid #21262d;border-radius:8px;padding:20px;text-align:center}
.compare-arrow{display:flex;align-items:center;justify-content:center;font-size:24px;color:#58a6ff}
.compare-box .big{font-size:32px;font-weight:700;margin:8px 0}
.note{color:#8b949e;font-size:12px;margin-top:8px}
.section-note{background:#161b22;border-left:3px solid #d29922;padding:12px 16px;margin:16px 0;font-size:13px;color:#d29922;border-radius:0 8px 8px 0}
.opt-change{display:flex;align-items:center;gap:8px;padding:6px 0;font-size:13px}
.opt-change .action{font-weight:600}
.sell{color:#f85149}.buy{color:#3fb950}
</style>
</head>
<body>

<div id="lock-screen">
<h1>ğŸ”’</h1>
<input type="password" id="pwd" maxlength="4" placeholder="Â·Â·Â·Â·" autofocus>
<div class="error" id="pwd-error"></div>
</div>

<div id="dashboard">
<h1>ğŸ´ CC Strategy Dashboard</h1>
<p class="subtitle">Covered Call æ”¶ç§Ÿå¹´åŒ–åˆ†æ Â· æ›´æ–°äº 2026-02-19</p>
<div class="grid" id="summary-cards"></div>
<h2>ğŸ’° 2026 å·²å®ç°æ”¶ç›Š</h2>
<div class="grid" id="realized-cards"></div>
<table id="closed-table"><thead><tr><th>æ ‡çš„</th><th>ç±»å‹</th><th>Strike</th><th>å¼€ä»“</th><th>å¹³ä»“</th><th>æŒæœ‰å¤©æ•°</th><th>æƒåˆ©é‡‘</th><th>ç»“æœ</th></tr></thead><tbody></tbody></table>
<h2>ğŸ“Š å½“å‰ CC æŒä»“è¡¨ç°</h2>
<table id="cc-table"><thead><tr><th>æ ‡çš„</th><th>Strike</th><th>åˆ°æœŸ</th><th>DTE</th><th>æƒåˆ©é‡‘</th><th>æˆæœ¬(100è‚¡)</th><th>å•æ¬¡æ”¶ç›Šç‡</th><th>å¹´åŒ–æ”¶ç›Šç‡</th><th>çŠ¶æ€</th></tr></thead><tbody></tbody></table>
<h2>ğŸ’¤ æœªå¼€ CC çš„ä»“ä½ï¼ˆé—²ç½®èµ„é‡‘ï¼‰</h2>
<table id="idle-table"><thead><tr><th>æ ‡çš„</th><th>è‚¡æ•°</th><th>å‡ä»·</th><th>å¸‚å€¼(æˆæœ¬)</th><th>å¯å¼€CC</th><th>å¤‡æ³¨</th></tr></thead><tbody></tbody></table>
<h2>ğŸ”„ ä¼˜åŒ–æ–¹æ¡ˆ</h2>
<div class="section-note">å–æ‰é›¶æ•£ä»“ä½ï¼Œé›†ä¸­åˆ°é«˜ IV æ ‡çš„ï¼ˆCOINï¼‰ï¼Œæœ€å¤§åŒ– CC æ”¶ç§Ÿæ•ˆç‡</div>
<div id="opt-changes"></div>
<h2>ğŸ“ˆ å½“å‰ vs ä¼˜åŒ–å</h2>
<div class="compare">
<div class="compare-box"><div style="color:#8b949e">å½“å‰å¹´åŒ–æ”¶å…¥</div><div class="big yellow" id="current-income">â€”</div><div style="color:#8b949e;font-size:12px" id="current-yield">â€”</div></div>
<div class="compare-arrow">â†’</div>
<div class="compare-box"><div style="color:#8b949e">ä¼˜åŒ–åå¹´åŒ–æ”¶å…¥</div><div class="big green" id="opt-income">â€”</div><div style="color:#8b949e;font-size:12px" id="opt-yield">â€”</div></div>
</div>
<p class="note">* DTE ä¸ºä¼°ç®—å€¼ï¼Œå®é™…ä»¥å¼€ä»“æ—¥æœŸä¸ºå‡†ã€‚ä¼˜åŒ–åæ”¶å…¥åŸºäº 30-45 DTE æ»šåŠ¨ä¼°ç®—ã€‚</p>
</div>

<script>
const ENC = {"salt":"2GlFNl0mnOfoE8UGOrJn7Q==","iv":"qEL7HlsBNGOLmEw4","tag":"7w3g/5k+V7EDDjxvr1a1TA==","data":"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"};

function b64(s){return Uint8Array.from(atob(s),c=>c.charCodeAt(0))}

async function decrypt(pwd){
  const enc=new TextEncoder();
  const keyMaterial=await crypto.subtle.importKey('raw',enc.encode(pwd),{name:'PBKDF2'},false,['deriveKey']);
  const key=await crypto.subtle.deriveKey({name:'PBKDF2',salt:b64(ENC.salt),iterations:100000,hash:'SHA-256'},keyMaterial,{name:'AES-GCM',length:256},false,['decrypt']);
  const ct=b64(ENC.data);
  const tag=b64(ENC.tag);
  const combined=new Uint8Array(ct.length+tag.length);
  combined.set(ct);combined.set(tag,ct.length);
  const plain=await crypto.subtle.decrypt({name:'AES-GCM',iv:b64(ENC.iv)},key,combined);
  return JSON.parse(new TextDecoder().decode(plain));
}

document.getElementById('pwd').addEventListener('input',async function(){
  if(this.value.length===4){
    try{
      const data=await decrypt(this.value);
      document.getElementById('lock-screen').style.display='none';
      document.getElementById('dashboard').style.display='block';
      render(data);
    }catch(e){
      document.getElementById('pwd-error').textContent='å¯†ç é”™è¯¯';
      this.value='';
    }
  }
});

function fmt(n){return '$'+n.toLocaleString('en-US',{minimumFractionDigits:0,maximumFractionDigits:0})}
function fmtPct(n){return n.toFixed(1)+'%'}
function daysBetween(d1,d2){return Math.round((new Date(d2)-new Date(d1))/86400000)}

function render(D){
  const today='2026-02-19';

  // Realized gains section
  const ctb=document.querySelector('#closed-table tbody');
  let totalRealized=0,tradeCount=0;
  (D.closedTrades||[]).forEach(t=>{
    const days=daysBetween(t.openDate,t.closeDate);
    totalRealized+=t.premium;tradeCount++;
    const tr=document.createElement('tr');
    tr.innerHTML=`<td><strong>${t.ticker}</strong></td><td>${t.type}</td><td>$${t.strike}</td><td>${t.openDate.slice(5)}</td><td>${t.closeDate.slice(5)}</td><td>${days}å¤©</td><td class="green">${fmt(t.premium)}</td><td><span class="tag ${t.assigned?'tag-warn':'tag-safe'}">${t.assigned?'è¢«Assign':'åˆ°æœŸå½’é›¶'}</span></td>`;
    ctb.appendChild(tr);
  });
  const startDate='2026-01-01';
  const daysYTD=daysBetween(startDate,today);
  const annRealized=daysYTD>0?totalRealized*(365/daysYTD):0;
  [{label:'YTD å·²å®ç°æ”¶ç›Š',value:fmt(totalRealized),cls:'green'},{label:'å·²å¹³ä»“ç¬”æ•°',value:tradeCount+'ç¬”',cls:'blue'},{label:'å¹´åŒ–æ¨ç®—',value:fmt(Math.round(annRealized)),cls:'green'}].forEach(c=>{
    const d=document.createElement('div');d.className='card';
    d.innerHTML=`<div class="label">${c.label}</div><div class="value ${c.cls}">${c.value}</div>`;
    document.getElementById('realized-cards').appendChild(d);
  });

  const tbody=document.querySelector('#cc-table tbody');
  let totalPA=0,totalCC=0;

  D.ccPositions.forEach(p=>{
    const dte=daysBetween(p.sellDate,p.expiry);
    const cost100=p.costPerShare*100;
    const yPer=(p.premium/cost100)*100;
    const ann=yPer*(365/dte);
    totalPA+=(p.premium/dte)*365;
    totalCC+=cost100;
    let st,sc;
    if(p.closed){st='å·²å¹³ä»“';sc='tag-idle'}
    else if(ann>30){st='é«˜æ”¶ç›Š';sc='tag-safe'}
    else if(ann>15){st='æ­£å¸¸';sc='tag-safe'}
    else{st='åä½';sc='tag-warn'}
    const dl=daysBetween(today,p.expiry);
    if(!p.closed&&dl<=2){st='âš ï¸ å³å°†åˆ°æœŸ';sc='tag-warn'}
    const tr=document.createElement('tr');
    tr.innerHTML=`<td><strong>${p.ticker}</strong></td><td>$${p.strike}</td><td>${p.expiry.slice(5)}</td><td>${dte}å¤©</td><td>${fmt(p.premium)}</td><td>${fmt(Math.round(cost100))}</td><td>${fmtPct(yPer)}</td><td><strong>${fmtPct(ann)}</strong></td><td><span class="tag ${sc}">${st}</span></td>`;
    tbody.appendChild(tr);
  });

  const itb=document.querySelector('#idle-table tbody');
  let totalIdle=0;
  D.idlePositions.forEach(p=>{
    const mv=p.shares*p.cost;totalIdle+=mv;
    const tr=document.createElement('tr');
    tr.innerHTML=`<td><strong>${p.ticker}</strong></td><td>${p.shares}</td><td>$${p.cost}</td><td>${fmt(Math.round(mv))}</td><td>${p.canCC?'<span class="tag tag-safe">å¯ä»¥</span>':'<span class="tag tag-danger">ä¸è¶³100è‚¡</span>'}</td><td>${p.note}</td>`;
    itb.appendChild(tr);
  });

  const totalCap=totalCC+totalIdle;
  const ccCov=totalCC/totalCap*100;
  const pYield=totalPA/totalCap*100;
  [{label:'æ€»æŒä»“æˆæœ¬',value:fmt(Math.round(totalCap)),cls:'blue'},{label:'CC è¦†ç›–èµ„é‡‘',value:fmt(Math.round(totalCC)),cls:'green'},{label:'é—²ç½®èµ„é‡‘',value:fmt(Math.round(totalIdle)),cls:'yellow'},{label:'CC è¦†ç›–ç‡',value:fmtPct(ccCov),cls:ccCov>60?'green':'yellow'},{label:'CC å¹´åŒ–æ”¶å…¥(ä¼°)',value:fmt(Math.round(totalPA)),cls:'green'},{label:'ç»„åˆå¹´åŒ–æ”¶ç›Šç‡',value:fmtPct(pYield),cls:pYield>10?'green':'yellow'}].forEach(c=>{
    const d=document.createElement('div');d.className='card';
    d.innerHTML=`<div class="label">${c.label}</div><div class="value ${c.cls}">${c.value}</div>`;
    document.getElementById('summary-cards').appendChild(d);
  });

  D.optChanges.forEach(c=>{
    const d=document.createElement('div');d.className='opt-change';
    d.innerHTML=`<span class="action ${c.cls}">${c.action}</span> ${c.detail}`;
    document.getElementById('opt-changes').appendChild(d);
  });

  const optAI=D.optEstimates.reduce((s,e)=>s+e.monthlyPremium*12,0);
  const optTC=D.optEstimates.reduce((s,e)=>s+e.cost,0);
  document.getElementById('current-income').textContent=fmt(Math.round(totalPA));
  document.getElementById('current-yield').textContent='ç»„åˆå¹´åŒ– '+fmtPct(pYield);
  document.getElementById('opt-income').textContent=fmt(optAI);
  document.getElementById('opt-yield').textContent='ç»„åˆå¹´åŒ– '+fmtPct(optAI/optTC*100);
}
</script>
</body>
</html>
